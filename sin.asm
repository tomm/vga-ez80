; angle in 'hl (1024=2*pi ;), so 256 for each quadrant
; a := sin(hl) ; as signed int8_t
sin:
		ld a,h
		and 3
		jr z,.first_quad
		cp 1
		jr z,.second_quad
		cp 2
		jr z,.third_quad
	.fourth_quad:
		push de
		ld a,255
		sub l
		ld de,sin_table
		ld e,a
		ld a,(de)
		neg
		pop de
		ret

	.first_quad:
		push de
		ld de,sin_table
		ld e,l
		ld a,(de)
		pop de
		ret

	.second_quad:
		push de
		ld a,255
		sub l
		ld de,sin_table
		ld e,a
		ld a,(de)
		pop de
		ret

	.third_quad:
		push de
		ld de,sin_table
		ld e,l
		ld a,(de)
		neg
		pop de
		ret


.align 0x100
sin_table: ; 256 bytes.
		.db 0, 1, 2, 2, 3, 4, 5, 5, 6, 7, 8, 9, 9, 10, 11, 12, 12, 13, 14, 15, 16
		.db 16, 17, 18, 19, 19, 20, 21, 22, 23, 23, 24, 25, 26, 26, 27, 28, 29, 29, 30, 31
		.db 32, 32, 33, 34, 35, 36, 36, 37, 38, 39, 39, 40, 41, 41, 42, 43, 44, 44, 45, 46
		.db 47, 47, 48, 49, 50, 50, 51, 52, 52, 53, 54, 54, 55, 56, 57, 57, 58, 59, 59, 60
		.db 61, 61, 62, 63, 63, 64, 65, 66, 66, 67, 68, 68, 69, 69, 70, 71, 71, 72, 73, 73
		.db 74, 75, 75, 76, 77, 77, 78, 78, 79, 80, 80, 81, 81, 82, 83, 83, 84, 84, 85, 86
		.db 86, 87, 87, 88, 88, 89, 90, 90, 91, 91, 92, 92, 93, 93, 94, 94, 95, 95, 96, 96
		.db 97, 97, 98, 98, 99, 99, 100, 100, 101, 101, 102, 102, 103, 103, 104, 104, 105
		.db 105, 105, 106, 106, 107, 107, 108, 108, 108, 109, 109, 110, 110, 110, 111, 111
		.db 112, 112, 112, 113, 113, 113, 114, 114, 114, 115, 115, 115, 116, 116, 116, 117
		.db 117, 117, 118, 118, 118, 118, 119, 119, 119, 120, 120, 120, 120, 121, 121, 121
		.db 121, 121, 122, 122, 122, 122, 123, 123, 123, 123, 123, 124, 124, 124, 124, 124
		.db 124, 125, 125, 125, 125, 125, 125, 125, 125, 126, 126, 126, 126, 126, 126, 126
		.db 126, 126, 126, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127, 127,127
